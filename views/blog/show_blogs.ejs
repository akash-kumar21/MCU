<%-include('../partials/header', {page_title:"All Blogs"})-%>
<%- include('../partials/navbar', {allPosts: blogs}); %>

<div id = "index-body" container">
  <br>
  <h1 class = "text-center"> BLOGS BLOGS BLOGS </h1>

  <br></br>

  <div class="row text-center">
  <% let i = 0; %>
  <% for (post of Object.values(blogs)) {%>
    <% let filename = post.title.replace(/ /g, "-"); %>
  	<div class="col-4">
      <div class="card text-center " style="width: 18rem;">
        <img height = "200px" class="card-img-top" src="<%=post.image%>" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title"><%=post.title%></h5>
          <p class="card-text"><%=post.previewContent%></p>
          <a href="blog/<%=filename%>" class="btn btn-primary">Link</a>
        </div>
      </div>

  	<form action="/blog/<%= filename %>/edit" method="GET">
  	  <button>Update Blog</button>
  	</form>

  	<form action="/blog/<%= filename %>?_method=DELETE" method="POST">
  	  <button>Delete Blog</button>
  	</form>
  	</div>
      <%if ((i+1)%3==0 && i!=0){ %>
    </div> <!-- end the row div-->
    <br></br>
    <div class="row text-center">
      <% } %>
      <% i++; %>
  	<% } %>
      </div> <!--last row -->
      <br>


      <h2><a class="nav-link" href="/blog/create">Create Blog</a></h2>

</div>

<%-include('../partials/footer')-%>
